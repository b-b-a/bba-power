<?php
	$this->title = "BBA Meters";
	$this->headTitle($this->title);

    echo $this->meterSearchForm;
    /* @var $meter Power_Model_Meter */
?>

<table>
	<tr>
	<th>Client</th>
	<th>Site Address</th>
	<th>Type <span class="id">(id)</span></th>
	<th>Number</th>
	<th>&nbsp;</th>

	</tr>
    <?php foreach($this->meters as $meter) : ?>
	<tr>
        <td>
            <?php echo $this->escape($meter->client_name); ?>
        </td>
        <td><?php echo $this->formatSiteAddress(array(
            $this->escape($meter->clientAd_address1), $this->escape($meter->clientAd_address2),
            $this->escape($meter->clientAd_address3), $this->escape($meter->clientAd_postcode)
        )); ?></td>
        <td><?php echo $meter->type; ?>&nbsp;
            <span class="id">(<?php echo $this->escape($meter->id); ?>)</span></td>
        <td><?php echo $meter->numberMain; ?></td>
		<td class="action">
			<a href="<?php echo $this->url(array(
                'controller'    => 'usage',
                'action'        => 'index',
				'meterId'       => $meter->id
            ), 'default', true);?>" class="button">Usage</a>

			<a href="<?php echo $this->url(array(
                'controller'    => 'meter',
                'action'        => 'edit',
				'meterId'       => $meter->id
            ),'default', true);?>" class="button">Edit</a>
<!--
			<a href="<?php echo $this->url(array(
                'controller'    => 'meter',
                'action'        => 'delete',
                'meterId'       => $meter->id
            ), 'default', true);?>" class="button">Delete</a>
-->
		</td>
	</tr>
    <?php endforeach; ?>
</table>

<?php
if ($this->meters instanceof Zend_Paginator) {
    echo $this->paginationControl(
            $this->meters,
            'Sliding',
            '_paginate.phtml',
            array('params' => $this->search)
    );
}
?>